# 표현 가능한 이진트리

> https://school.programmers.co.kr/learn/courses/30/lessons/150367

### 참고한 내 코드

```java
import java.util.*;

class Solution {
    public int[] solution(long[] numbers) {
        int[] ans = new int[numbers.length];

        for (int i = 0; i < numbers.length; i++) {
            String tmp = Long.toBinaryString(numbers[i]);
            int lev = 1;
            int nodeCnt = 1;
            while (tmp.length() > nodeCnt) {
                nodeCnt += Math.pow(2, lev);
                lev++;
            }
            String cur = "0".repeat(nodeCnt - tmp.length()) + tmp;

            if (isValid(cur)) ans[i] = 1;
        }

        return ans;
    }

    public boolean isValid(String cur) {
        if (cur.length() == 1) return true;

        int root = cur.length() / 2;
        String lt = cur.substring(0, root);
        String rt = cur.substring(root + 1);

        if (cur.charAt(root) == '0') {
            for (int i = 0; i < cur.length(); i++) {
                if (cur.charAt(i) == '1') return false;
            }
        }

        return isValid(lt) && isValid(rt);
    }
}
```

### 피드백

- 이진 트리 탐색의 형태를 띤 것 같지만, 분할 정복과 dfs를 활용한 문제.
    - 이진 트리 구조는 사실 문제의 껍데기에 불과하고 핵심은, 이진수로 표현한 값을 이진 트리 모양으로 표현할 수 있는가이다.
    - 이 과정에서 포화 이진트리로 만드는 것이 핵심인데, 처음엔 단순히 이진수 값을 길이가 홀수인 것으로만 착각하여 문제가 계속 틀렸다.
        - 포화 이진트리 형태는 길이가 항상 1, 3, 7, 15 ... 이런 식으로 늘어나므로 이진수 값의 길이를 트리 크기에 맞춰 0을 앞에 붙여주는 것이 첫번째 핵심.
    - 그리고 분할 정복으로 cur 길이가 1이 될 때까지 나누는 것이 중요하다. cur 길이가 1이 되면 마지막 잎의 노드이므로 무조건 true.
        - 그렇다면 길이가 3 이상일 때 lt, root, rt를 비교해야 하는데, root가 1이면 lt, rt에 상관없이 분할할 수 있다.
        - 반면 root가 0인 경우 그 아래에 있는 모든 노드들은 전부 0이어야 한다. 왜냐하면 포화 이진트리이기 때문.
            - 이 부분에 대해 다른 풀이들은 한번 더 lt와 rt를 dfs 하면서 그 안에서 lt 또는 rt가 1 값을 갖는지 찾는 경우가 많았다.
            - 나는 좀 더 직관적으로 전부 0인지 탐색하였다.

### 출처

- https://acisliver.tistory.com/entry/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4-%ED%91%9C%ED%98%84-%EA%B0%80%EB%8A%A5%ED%95%9C-%EC%9D%B4%EC%A7%84%ED%8A%B8%EB%A6%AC-JAVA
- https://velog.io/@seunghyun97/%ED%91%9C%ED%98%84-%EA%B0%80%EB%8A%A5%ED%95%9C-%EC%9D%B4%EC%A7%84%ED%8A%B8%EB%A6%AC