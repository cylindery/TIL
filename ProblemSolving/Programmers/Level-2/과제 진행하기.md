# 과제 진행하기

> https://school.programmers.co.kr/learn/courses/30/lessons/176962

### 내 코드 1

```java
import java.util.*;

class Solution {
    public String[] solution(String[][] plans) {
        int n = plans.length;
        Plan[] arr = new Plan[n];
        for (int i = 0; i < n; i++) {
            String name = plans[i][0];
            int time = Integer.parseInt(plans[i][1].substring(0, 2)) * 60 + Integer.parseInt(plans[i][1].substring(3));
            int cost = Integer.parseInt(plans[i][2]);
            arr[i] = new Plan(name, time, cost);
        }

        Arrays.sort(arr, Comparator.comparingInt(o -> o.start));
        Stack<Plan> stack = new Stack<>();
        ArrayList<String> ans = new ArrayList<>();
        int time = 0; // 현재 시간

        for (Plan cur : arr) {
            while (!stack.isEmpty() && stack.peek().getEnd(time) <= cur.start) {
                time += stack.pop().cost;
                ans.add(stack.peek().name);
            }

            time = cur.start;
            stack.push(cur);
        }

        while (!stack.isEmpty()) {
            ans.add(stack.pop().name);
        }

        return ans.toArray(new String[0]);
    }

    static class Plan {
        String name;
        int start, cost;

        public Plan(String name, int start, int cost) {
            this.name = name;
            this.start = start;
            this.cost = cost;
        }

        public int getEnd(int cnt) {
            return cnt + this.cost;
        }
    }
}
```

### 내 코드 2

```java
import java.util.*;

class Solution {
    public String[] solution(String[][] plans) {
        int n = plans.length;
        Plan[] arr = new Plan[n];
        for (int i = 0; i < n; i++) {
            String name = plans[i][0];
            int time = Integer.parseInt(plans[i][1].substring(0, 2)) * 60 + Integer.parseInt(plans[i][1].substring(3));
            int cost = Integer.parseInt(plans[i][2]);
            arr[i] = new Plan(name, time, cost);
        }

        Arrays.sort(arr, Comparator.comparingInt(o -> o.start));
        Stack<Plan> stack = new Stack<>();
        ArrayList<String> ans = new ArrayList<>();
        int time = 0; // 현재 시간

        for (Plan cur : arr) {
            if (!stack.isEmpty()) {
                while (!stack.isEmpty() && stack.peek().getEnd(time) <= cur.start) {
                    time = stack.peek().getEnd(time);
                    ans.add(stack.pop().name);
                }

                int rest = cur.start - time;
                if (rest > 0 && !stack.isEmpty()) {
                    stack.peek().cost -= rest;
                }
            }
            time = cur.start;
            stack.push(cur);
        }

        while (!stack.isEmpty()) {
            ans.add(stack.pop().name);
        }

        return ans.toArray(new String[0]);
    }

    static class Plan {
        String name;
        int start, cost;

        public Plan(String name, int start, int cost) {
            this.name = name;
            this.start = start;
            this.cost = cost;
        }

        public int getEnd(int time) {
            return time + this.cost;
        }
    }
}
```

### 참고한 코드

```java
import java.util.*;

class Solution {
    public String[] solution(String[][] plans) {
        int n = plans.length;
        Plan[] arr = new Plan[n];
        for (int i = 0; i < n; i++) {
            String name = plans[i][0];
            int time = Integer.parseInt(plans[i][1].substring(0, 2)) * 60 + Integer.parseInt(plans[i][1].substring(3));
            int cost = Integer.parseInt(plans[i][2]);
            arr[i] = new Plan(name, time, cost);
        }

        Arrays.sort(arr, Comparator.comparingInt(o -> o.start));
        Stack<Plan> stack = new Stack<>();
        ArrayList<String> ans = new ArrayList<>();
        int time = 0; // 현재 시간

        for (int i = 0; i < n - 1; i++) {
            Plan cur = arr[i];
            Plan next = arr[i + 1];

            if (cur.getEnd() > next.start) {
                cur.cost = cur.getEnd() - next.start;
                stack.push(cur);
                continue;
            }
            ans.add(cur.name);

            // 남은 시간 처리
            int rest = next.start - cur.getEnd();
            while (rest > 0 && !stack.isEmpty()) {
                Plan top = stack.peek();
                if (top.cost > rest) {
                    top.cost -= rest;
                    rest = 0;
                } else {
                    ans.add(stack.peek().name);
                    rest -= stack.pop().cost;
                }
            }
        }

        ans.add(arr[n - 1].name);
        while (!stack.isEmpty()) ans.add(stack.pop().name);

        return ans.toArray(new String[0]);
    }

    static class Plan {
        String name;
        int start, cost;

        public Plan(String name, int start, int cost) {
            this.name = name;
            this.start = start;
            this.cost = cost;
        }

        public int getEnd() {
            return this.start + this.cost;
        }
    }
}
```

### 피드백

- 주어진 plans 배열을 수 오름차순으로 정렬, 그리고 스택을 활용하여 구현하는 문제.
    - 처음 내 코드는 58.3점을 받으며 실패하였다. 곰곰이 생각해보니 스택에 과제가 있고, 그 과제가 다음 과제 차례 전에 완료할 수 있으면 과제를 완료해주는 것은 맞았다.
        - 하지만 그 다음 과제가 만약 남아 있고, 시간이 조금 남은 경우를 업데이트 하는 것이 빠졌다. 구현에 좀 더 신경을 써야 한다.
    - 다른 코드를 보면 내가 쓴 코드보다 직관적으로, 현재 과제와 다음 과제를 동시에 비교하며 한 번에 처리가 안되는 경우만 스택에 과제를 넣어줬다.
        - 모든 과제를 스택에 넣는 내 코드보다, 완료되지 않는 코드만 스택에 쌓는 다는 점에서 좀 더 직관적인 것 같다.

### 출처

- https://jjuniyo.tistory.com/7